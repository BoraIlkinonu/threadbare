<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Simulators</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        /* Main Menu Styles */
        .main-menu {
            padding: 40px;
            text-align: center;
        }
        
        .main-menu h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .main-menu .subtitle {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 40px;
        }
        
        .simulator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .simulator-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 30px;
            text-align: left;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }
        
        .simulator-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .simulator-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .simulator-card h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 10px;
        }
        
        .simulator-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .simulator-card .features {
            list-style: none;
            padding: 0;
        }
        
        .simulator-card .features li {
            color: #555;
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }
        
        .simulator-card .features li:before {
            content: "✓";
            color: #27ae60;
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        /* Back button */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #2c3e50;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            display: none;
        }
        
        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        /* Simulator content areas */
        .simulator-content {
            display: none;
            padding: 20px;
            min-height: 100vh;
        }
        
        .simulator-content.active {
            display: block;
        }
        
        /* GitHub Simulator Styles */
        .github-simulator {
            max-width: 800px;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 30px;
        }
        
        .github-simulator h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .role-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .role-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .role-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .role-card .role-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .role-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .role-card p {
            color: #666;
            font-size: 14px;
        }
        
        .workflow-container {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .step-info {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
            font-size: 14px;
        }
        
        .current-step {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .platform-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            color: white;
            margin-bottom: 10px;
        }
        
        .platform-badge.github { background: #333; }
        .platform-badge.godot { background: #478cbf; }
        .platform-badge.endless { background: #8b5cf6; }
        .platform-badge.email { background: #16a085; }
        
        .step-title {
            color: #2c3e50;
            font-size: 1.3em;
            margin-bottom: 10px;
        }
        
        .step-content {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .step-details {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
            color: #1565c0;
        }
        
        .step-warning {
            background: #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
            color: #d63031;
        }
        
        .choices-grid {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }
        
        .choice-btn {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .choice-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .choice-btn .choice-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .choice-btn .choice-desc {
            font-size: 14px;
            color: #666;
        }
        
        .next-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            float: right;
            transition: all 0.3s ease;
        }
        
        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .complete-btn {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            display: block;
            margin: 20px auto 0;
            transition: all 0.3s ease;
        }
        
        .complete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .state-display {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .state-display h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .state-item {
            color: #667eea;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        /* Godot Simulator Styles (from the original) */
        .godot-simulator {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 15px;
        }
        
        .godot-container {
            background: white;
            border-radius: 12px;
            padding: 15px;
        }
        
        .godot-simulator h1 {
            color: #2c3e50;
            text-align: center;
            margin: 0 0 8px 0;
            font-size: 1.3em;
        }
        
        .scenario-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 6px 10px;
            margin: 0 0 6px 0;
            border-left: 4px solid #3498db;
        }
        
        .scenario-section h3 {
            margin: 0 0 4px 0;
            font-size: 1em;
        }
        
        .scenario-section p {
            margin: 2px 0;
            font-size: 14px;
        }
        
        .current-step-godot {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
            padding: 8px 12px;
            margin: 0 0 6px 0;
            border: none;
        }
        
        .current-step-godot h3 {
            margin: 0 0 6px 0;
            font-size: 1em;
        }
        
        .current-step-godot p {
            margin: 4px 0;
            font-size: 14px;
        }
        
        .choices-godot {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin: 8px 0;
        }
        
        .choice-btn-godot {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .choice-btn-godot:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .path-tracker {
            background: #e8f4f8;
            border-radius: 8px;
            padding: 6px 10px;
            margin: 0 0 6px 0;
            border-left: 4px solid #1abc9c;
        }
        
        .path-tracker h4 {
            margin: 0 0 4px 0;
            font-size: 0.9em;
        }
        
        .path-step {
            background: #1abc9c;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            margin: 1px;
            display: inline-block;
        }
        
        .outcome {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border-radius: 8px;
            padding: 8px 12px;
            margin: 6px 0;
        }
        
        .outcome h3 {
            margin: 0 0 4px 0;
            font-size: 1em;
        }
        
        .outcome p {
            margin: 2px 0;
            font-size: 14px;
        }
        
        .reset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 8px;
        }
        
        .reset-btn:hover {
            background: #c0392b;
        }
        
        .info-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 6px 8px;
            margin: 4px 0;
            color: #856404;
        }
        
        .info-box h4 {
            margin: 0 0 2px 0;
            font-size: 0.9em;
        }
        
        .info-box p {
            margin: 2px 0;
            font-size: 13px;
        }
        
        .success-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 6px;
            padding: 6px 8px;
            margin: 4px 0;
            color: #155724;
        }
        
        .warning-box {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 6px;
            padding: 6px 8px;
            margin: 4px 0;
            color: #721c24;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .simulator-grid {
                grid-template-columns: 1fr;
            }
            
            .role-selection {
                grid-template-columns: 1fr;
            }
            
            .main-menu h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" id="backBtn" onclick="showMainMenu()">← Back to Main Menu</button>
    
    <div class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="main-menu">
            <h1>🎮 Workflow Simulators</h1>
            <p class="subtitle">Interactive tools to understand development workflows</p>
            
            <div class="simulator-grid">
                <div class="simulator-card" onclick="showGitHubSimulator()">
                    <div class="icon">🔧</div>
                    <h3>Explorer Program GitHub Workflow</h3>
                    <p>Experience the complete student and teacher workflow for setting up GitHub-based game development projects.</p>
                    <ul class="features">
                        <li>GitHub account creation process</li>
                        <li>Endless Platform integration</li>
                        <li>Software bundle installation</li>
                        <li>Authentication methods (Token vs CLI)</li>
                        <li>Project download and setup</li>
                    </ul>
                </div>
                
                <div class="simulator-card" onclick="showGodotSimulator()">
                    <div class="icon">🎯</div>
                    <h3>Godot Collaborative Development</h3>
                    <p>Simulate real-time collaboration scenarios in game development with file locking, conflict resolution, and team coordination.</p>
                    <ul class="features">
                        <li>File access and locking system</li>
                        <li>Conflict detection and resolution</li>
                        <li>Team coordination workflows</li>
                        <li>Auto-resolution mechanisms</li>
                        <li>Discussion and decision tools</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- GitHub Simulator -->
        <div id="githubSimulator" class="simulator-content">
            <div class="github-simulator">
                <h2>Explorer Program GitHub Workflow Simulator</h2>
                
                <div id="githubRoleSelection" class="role-selection">
                    <div class="role-card" onclick="startGitHubWorkflow('student')">
                        <div class="role-icon">👨‍🎓</div>
                        <h3>Student</h3>
                        <p>Complete workflow: Account → Platform → Bundle → Project</p>
                    </div>
                    <div class="role-card" onclick="startGitHubWorkflow('teacher')">
                        <div class="role-icon">👨‍🏫</div>
                        <h3>Teacher</h3>
                        <p>Repository management and team setup</p>
                    </div>
                </div>
                
                <div id="githubWorkflow" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="githubProgress"></div>
                    </div>
                    <div class="step-info" id="githubStepInfo">Step 1 of 1</div>
                    
                    <div class="workflow-container">
                        <div class="current-step" id="githubCurrentStep">
                            <!-- Step content will be populated by JavaScript -->
                        </div>
                        
                        <div id="githubStateDisplay" style="display: none;" class="state-display">
                            <h4>Current State:</h4>
                            <div id="githubStateContent"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Godot Simulator -->
        <div id="godotSimulator" class="simulator-content">
            <div class="godot-simulator">
                <div class="godot-container">
                    <h1>🎮 Godot Collaborative Development - Workflow Simulator</h1>
                    
                    <div class="info-box">
                        <h4>🎯 Implementation Note</h4>
                        <p><strong>This simulator demonstrates the MVP implementation:</strong> Universal file handling where all file types (.gd, .tscn, .png, .ogg) are treated equally with simple conflict detection and basic preservation. The Full Feature implementation will add file-type-specific intelligence, visual comparison tools, and advanced collaboration features.</p>
                    </div>
                    
                    <div class="scenario-section">
                        <h3>📋 Current Scenario</h3>
                        <p><strong>Team:</strong> Alice, Bob, and Charlie working on a 2D platformer game</p>
                        <p><strong>Context:</strong> You are <span id="current-user">Bob</span>, and you want to work on <span id="current-file">PlayerController.gd</span></p>
                    </div>
                    
                    <div class="path-tracker">
                        <h4>🛤️ Your Path Through the Workflow:</h4>
                        <div id="path-display">
                            <span class="path-step">Started</span>
                        </div>
                    </div>
                    
                    <div id="current-step-container">
                        <div class="current-step-godot">
                            <h3 id="step-title">Step 1: File Access Check</h3>
                            <p id="step-description">The system is checking the status of PlayerController.gd to determine if you can edit it...</p>
                            
                            <div class="info-box">
                                <strong>System Status:</strong> Checking lock status and recent updates...
                            </div>
                            
                            <div class="choices-godot" id="choices-container">
                                <button class="choice-btn-godot" onclick="makeGodotChoice('available')">
                                    🔗 File is Available (No lock, no recent updates)
                                </button>
                                <button class="choice-btn-godot" onclick="makeGodotChoice('has-updates')">
                                    📙 File Has Recent Updates (Alice modified it 5 minutes ago)
                                </button>
                                <button class="choice-btn-godot" onclick="makeGodotChoice('locked')">
                                    🔒 File is Currently Locked (Charlie is actively editing)
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="outcome-container"></div>
                    
                    <button class="reset-btn" onclick="resetGodotSimulation()" style="display: none;" id="reset-button">
                        🔄 Start New Simulation
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentView = 'main';
        let githubState = {
            role: '',
            currentStep: 0,
            authMethod: '',
            workflow: []
        };
        
        // GitHub Workflow Data
        const githubWorkflows = {
            student: {
                base: [
                    {
                        title: 'Create GitHub Account',
                        platform: 'github',
                        content: 'You need to manually create a GitHub account at github.com. GitHub prohibits automated account creation.',
                        details: 'Required: valid email, unique username, secure password. You may encounter CAPTCHA, email verification, or username conflicts.'
                    },
                    {
                        title: 'GitHub Account Created',
                        platform: 'github',
                        content: 'Your GitHub account is now active and verified.'
                    },
                    {
                        title: 'Sign in to Endless Platform',
                        platform: 'endless',
                        content: 'Navigate to the Endless Platform and click "Sign in with GitHub". You\'ll be redirected to GitHub for OAuth authentication.',
                        details: 'You can only access Endless Platform after creating your GitHub account first.'
                    },
                    {
                        title: 'Endless Platform Access Granted',
                        platform: 'endless',
                        content: 'You\'re now signed into Endless Platform using your GitHub credentials.'
                    },
                    {
                        title: 'Download Explorer Bundle',
                        platform: 'endless',
                        content: 'Click "Explorer Program - Godot Bundle" button. The OS-specific installer (MSI for Windows, DMG for macOS) downloads automatically.'
                    },
                    {
                        title: 'Install Software Bundle',
                        platform: 'endless',
                        content: 'The installer runs automatically: Git installs silently (/SILENT argument), Godot extracts with pre-configured settings including GitHub connectivity plugins.',
                        details: 'Godot opens automatically with the Template project loaded.'
                    },
                    {
                        title: 'Receive Repository Invitation',
                        platform: 'email',
                        content: 'You receive an email: "teacher-username invited you to collaborate on team-alpha-godot-project".'
                    },
                    {
                        title: 'Accept Repository Invitation',
                        platform: 'github',
                        content: 'Click "View invitation" in email → GitHub opens → Yellow banner: "You\'ve been invited to collaborate" → Click "Accept invitation".',
                        details: 'You now have Write access to your team repository.'
                    },
                    {
                        title: 'Choose Authentication Method',
                        platform: 'godot',
                        content: 'To download LFS files, you need to authenticate with GitHub. Choose your preferred method:',
                        type: 'choice',
                        choices: [
                            {
                                id: 'personal-token',
                                title: 'Personal Access Token (Manual)',
                                description: 'Generate token manually in GitHub settings'
                            },
                            {
                                id: 'github-cli',
                                title: 'GitHub CLI (Automated)',
                                description: 'Device code flow with automatic setup'
                            }
                        ]
                    }
                ],
                personalToken: [
                    {
                        title: 'Generate Personal Access Token',
                        platform: 'github',
                        content: 'Navigate to GitHub Settings → Developer Settings → Personal Access Tokens → Generate new Token (classic)',
                        details: 'Note: "EP-Godot", Expiration: "No Expiration", Permissions: Check "repo" (includes all repository permissions)',
                        warning: 'CRITICAL: Copy the token immediately - it won\'t be displayed again!'
                    },
                    {
                        title: 'Token Generated',
                        platform: 'github',
                        content: 'Token created successfully. Keep the browser tab open until you use it in Godot.',
                        details: 'If you lose this token, you\'ll need to generate a new one.'
                    },
                    {
                        title: 'Configure Token in Godot',
                        platform: 'godot',
                        content: 'Open the "Endless Project Setup" plugin → Paste your Personal Access Token in the authentication field.'
                    }
                ],
                githubCli: [
                    {
                        title: 'GitHub CLI Authentication Initiated',
                        platform: 'godot',
                        content: 'Godot triggers GitHub CLI with node-pty integration. A device registration code appears.'
                    },
                    {
                        title: 'Device Code Display',
                        platform: 'godot',
                        content: 'Pop-up shows 4×4 digit code with automatic clipboard copy. Click "Open Browser" to launch GitHub authentication page.'
                    },
                    {
                        title: 'Browser Authentication',
                        platform: 'github',
                        content: 'GitHub opens → Log in (or confirm existing login) → Paste the copied code → Click "Authorize".'
                    },
                    {
                        title: 'CLI Authentication Complete',
                        platform: 'godot',
                        content: 'Close browser and return to Godot. Token is automatically retrieved and configured.'
                    }
                ],
                final: [
                    {
                        title: 'Download Team Project',
                        platform: 'godot',
                        content: 'Paste your team repository link into "Your project link" text box → Click "Download Project".',
                        details: 'The complete project downloads with all LFS files using your authentication.'
                    },
                    {
                        title: 'Project Setup Complete',
                        platform: 'godot',
                        content: 'Your team project is now downloaded and ready for development!',
                        details: 'You can start coding, making commits, and collaborating with your team.',
                        complete: true
                    }
                ]
            },
            teacher: [
                {
                    title: 'Navigate to Master Repository',
                    platform: 'github',
                    content: 'Go to endless-studios/ep-godot-project repository on GitHub.'
                },
                {
                    title: 'Fork for First Team',
                    platform: 'github',
                    content: 'Click "Fork" button → Select your teacher account → Change name to "team-alpha-godot-project" → Set visibility to "Private" → Click "Create fork".'
                },
                {
                    title: 'Create Additional Team Forks',
                    platform: 'github',
                    content: 'Return to original repository and repeat forking process for each team: team-beta-godot-project, team-gamma-godot-project, etc.'
                },
                {
                    title: 'Invite Team Members',
                    platform: 'github',
                    content: 'For each team repository: Settings → Manage access → Invite a collaborator → Enter username → Set "Write" permissions → Add to repository.',
                    details: 'Repeat for all team members. Each student receives an email invitation.'
                },
                {
                    title: 'Send Repository Links',
                    platform: 'email',
                    content: 'Email each team their specific repository link for easy access.',
                    complete: true
                }
            ]
        };
        
        // Godot Simulator State
        let godotCurrentStep = 'file-access';
        let godotPathTaken = ['Started'];
        let godotSimulationData = {
            user: 'Bob',
            file: 'PlayerController.gd',
            teammate1: 'Alice',
            teammate2: 'Charlie'
        };

        const godotWorkflowSteps = {
            'file-access': {
                title: 'Step 1: File Access Check',
                description: 'The system is checking the status of PlayerController.gd to determine if you can edit it...',
                choices: {
                    'available': {
                        text: '🔗 File is Available (No lock, no recent updates)',
                        next: 'edit-file',
                        pathLabel: 'File Available'
                    },
                    'has-updates': {
                        text: '📙 File Has Recent Updates (Alice modified it 5 minutes ago)', 
                        next: 'handle-updates',
                        pathLabel: 'Has Updates'
                    },
                    'locked': {
                        text: '🔒 File is Currently Locked (Charlie is actively editing)',
                        next: 'handle-lock',
                        pathLabel: 'File Locked'
                    }
                }
            },
            
            'handle-updates': {
                title: 'Step 2: Handle Recent Updates',
                description: `⚠️ PlayerController.gd has been modified by ${godotSimulationData.teammate1} 5 minutes ago. You must get her changes first before editing.`,
                info: 'System Rule: You cannot work on files with recent updates until you sync them. No messaging needed - Alice has already completed her work.',
                educational: {
                    type: 'learning-moment',
                    title: '🎓 Learning Moment: Understanding Code Dependencies',
                    whatHappened: 'Alice just finished working on the same file you want to edit.',
                    whyItMatters: 'In collaborative development, you always need the latest changes before adding your own. This prevents your work from conflicting with teammates\' recent improvements.',
                    whatYouLearned: [
                        'Always consider how your changes affect teammates\' work',
                        'Communication prevents logical conflicts', 
                        'Testing together catches integration issues early'
                    ],
                    industryContext: 'Professional game development teams use version control systems that automatically detect these dependencies to prevent integration problems.'
                },
                choices: {
                    'get-updates': {
                        text: '⬇️ Get Alice\'s Updates First (Required)',
                        next: 'edit-file',
                        pathLabel: 'Got Updates'
                    }
                }
            },
            
            'handle-lock': {
                title: 'Step 2: Handle File Lock',
                description: `🔒 PlayerController.gd is currently being edited by ${godotSimulationData.teammate2}. Lock expires in 8 minutes.`,
                info: 'System Rule: You cannot override locks. You must wait or coordinate.',
                educational: {
                    type: 'professional-practice',
                    title: '💼 Professional Practice: Respecting Active Work',
                    whatHappened: 'Charlie is actively working on the file you need to edit.',
                    whyItMatters: 'Professional teams use file locking to prevent conflicts when multiple people work on the same code. Learning to coordinate respectfully is a crucial industry skill.',
                    industryExample: 'Major game studios like Epic Games, Ubisoft, and Nintendo use similar systems to coordinate team work on large projects.',
                    professionalSkills: [
                        'Respectful team coordination',
                        'Understanding workflow systems',
                        'Professional communication under pressure'
                    ]
                },
                choices: {
                    'wait-lock': {
                        text: '⏳ Wait for Charlie to Finish',
                        next: 'file-access',
                        pathLabel: 'Waited for Lock'
                    },
                    'message-locked': {
                        text: '💬 Send Message to Charlie',
                        next: 'wait-response',
                        pathLabel: 'Messaged Locked User'
                    }
                }
            },
            
            'wait-response': {
                title: 'Step 3: Waiting for Teammate Response',
                description: 'You sent a message to your teammate. Waiting for their response...',
                info: 'In real workflow, this could take a few minutes to hours depending on teammate availability.',
                educational: {
                    type: 'communication-skills',
                    title: '💬 Communication Skills Building',
                    whatHappened: 'You chose collaboration over forcing your way.',
                    whyItMatters: 'This approach builds trust and prevents conflicts. Professional developers spend significant time coordinating with teammates.',
                    feedback: 'You demonstrated: Clear communication, Respect for others\' work, Proactive problem-solving',
                    nextLevel: 'Try explaining WHY you need the file when messaging teammates. Context helps them prioritize and respond faster.',
                    communicationTips: [
                        'Be specific about urgency level',
                        'Explain the context of your request',
                        'Offer alternatives or compromises',
                        'Always thank teammates for their flexibility'
                    ]
                },
                choices: {
                    'positive-response': {
                        text: '✅ Teammate Responded Positively',
                        next: 'edit-file',
                        pathLabel: 'Got Permission'
                    },
                    'negative-response': {
                        text: '❌ Teammate Needs More Time',
                        next: 'wait-longer',
                        pathLabel: 'Need to Wait'
                    }
                }
            },
            
            'wait-longer': {
                title: 'Step 4: Extended Wait',
                description: 'Your teammate needs more time. You can work on other files or wait.',
                outcome: 'simulation-pause',
                educational: {
                    type: 'pattern-recognition',
                    title: '📊 Collaboration Pattern: Managing Priorities',
                    whatHappened: 'Your urgent task conflicts with your teammate\'s ongoing work.',
                    whyItMatters: 'Learning to manage priorities and find alternative solutions is crucial in team development.',
                    patternRecognition: [
                        'Blocked primary task → Switch to backup tasks',
                        'Teammate conflict → Communication and flexibility',
                        'Time pressure → Creative problem solving'
                    ],
                    professionalTip: 'Always have backup tasks ready when your primary work gets blocked. This keeps you productive while respecting teammates\' schedules.',
                    industryReality: 'In professional game development, developers typically work on 2-3 features simultaneously to handle exactly these situations.'
                },
                choices: {
                    'try-again': {
                        text: '🔄 Check File Status Again Later',
                        next: 'file-access',
                        pathLabel: 'Tried Again Later'
                    }
                }
            },
            
            'edit-file': {
                title: 'Step 3: Editing File',
                description: `✏️ You are now editing PlayerController.gd. A 15-minute lock has been created automatically.`,
                info: 'The lock will extend indefinitely while you remain active in the file.',
                educational: {
                    type: 'system-awareness',
                    title: '🔧 System Feature: Automatic File Locking',
                    whatHappened: 'The system automatically locked the file to protect your work and prevent conflicts.',
                    whyItMatters: 'The 15-minute timer ensures the lock releases if you step away, preventing teammates from being blocked unnecessarily.',
                    systemFeatures: [
                        'Automatic lock creation when editing begins',
                        'Lock extension while actively working',
                        'Automatic release when stepping away',
                        'Conflict prevention through coordination'
                    ],
                    professionalContext: 'Industry tools like Perforce, Unity Collaborate, and custom studio systems use similar automatic locking.',
                    bestPractice: 'The lock will extend as long as you keep working. If you need to step away, manually release the lock so teammates can access the file.'
                },
                choices: {
                    'finish-editing': {
                        text: '✅ Finished Making Changes',
                        next: 'share-changes',
                        pathLabel: 'Completed Edits'
                    }
                }
            },
            
            'share-changes': {
                title: 'Step 4: Share Changes',
                description: 'You want to share your changes with the team. System is checking for conflicts...',
                educational: {
                    type: 'learning-moment',
                    title: '🎓 Learning Moment: Conflict Detection Systems',
                    whatHappened: 'The system is checking if your changes will conflict with recent teammate work.',
                    whyItMatters: 'Automated conflict detection prevents integration problems before they become major issues.',
                    realWorldApplication: 'Professional game development uses continuous integration systems that automatically test how changes work together.',
                    technicalConcepts: [
                        'Automatic conflict detection',
                        'Integration testing',
                        'Continuous integration pipelines',
                        'Automated quality assurance'
                    ],
                    anticipation: 'Next, you\'ll see the results of this check and learn how to handle any conflicts professionally.'
                },
                choices: {
                    'no-conflicts': {
                        text: '✅ No Conflicts Detected',
                        next: 'push-success',
                        pathLabel: 'No Conflicts'
                    },
                    'potential-conflicts': {
                        text: '⚠️ Potential Conflicts Detected (MVP: Any change triggers notification)',
                        next: 'team-coordination',
                        pathLabel: 'Conflicts Detected'
                    }
                }
            },
            
            'push-success': {
                title: 'Step 5: Successful Push',
                description: '🎉 Your changes have been successfully shared with the team!',
                outcome: 'success',
                info: 'Team status updated automatically. Your teammates will see the changes within 2-3 minutes.',
                educational: {
                    type: 'success-celebration',
                    title: '🌟 Excellent Work! Professional Collaboration Complete',
                    whatYouAccomplished: 'You successfully navigated the entire collaborative development workflow without any conflicts or lost work.',
                    skillsDemonstrated: [
                        'File management and coordination',
                        'Conflict prevention strategies',
                        'Team communication',
                        'Professional workflow execution'
                    ],
                    industryValue: 'These skills directly transfer to professional game development environments at companies like Nintendo, Sony, Epic Games, and indie studios.',
                    careerImpact: 'Employers highly value developers who can collaborate effectively without losing work or creating conflicts.',
                    nextSteps: 'Continue building these collaboration patterns. Each successful coordination makes you a more valuable team member.'
                }
            },
            
            'team-coordination': {
                title: 'Step 5: Team Coordination Required',
                description: '🤝 System detected that Alice modified InventorySystem.gd recently. Team coordination is required.',
                info: 'MVP Rule: Any teammate modification triggers coordination process.',
                educational: {
                    type: 'advanced-learning',
                    title: '🎓 Advanced Learning: Logical Conflict Detection',
                    whatHappened: 'Your changes don\'t technically conflict, but they affect related systems.',
                    whyItMatters: 'Professional development requires understanding how code systems interact, not just avoiding text conflicts.',
                    realWorldExample: 'If you change player speed and someone else modifies jump mechanics, these changes interact even if they\'re in different files.',
                    advancedConcepts: [
                        'System dependency analysis',
                        'Logical vs. technical conflicts',
                        'Cross-system impact assessment',
                        'Architectural coordination'
                    ],
                    skillBuilding: 'You\'re learning to think about system dependencies - a crucial skill for senior developers and technical leads.',
                    industryRelevance: 'This type of analysis distinguishes senior developers from junior ones in professional environments.'
                },
                choices: {
                    'auto-approve': {
                        text: '👍 Auto-Approve (Let system handle it)',
                        next: 'wait-team',
                        pathLabel: 'Auto-Approved'
                    },
                    'object': {
                        text: '✋ I Object (Create discussion)',
                        next: 'create-discussion',
                        pathLabel: 'Objected'
                    }
                }
            },
            
            'wait-team': {
                title: 'Step 6: Waiting for Team Response',
                description: '⏳ Your team has 60 minutes to respond. Alice has been notified about the coordination request.',
                educational: {
                    type: 'communication-feedback',
                    title: '💬 Communication Excellence: Team Coordination',
                    whatYouChose: 'You chose to let the team coordinate rather than forcing your changes through.',
                    excellentDecision: 'This demonstrates professional maturity and collaborative mindset.',
                    skillsDisplayed: [
                        'Collaborative mindset over individual urgency',
                        'Trust in teammates and process',
                        'Professional patience under pressure',
                        'Conflict prevention through communication'
                    ],
                    industrySkill: 'Senior developers in major studios spend 30-40% of their time on coordination. This skill makes you incredibly valuable to employers.',
                    leadershipPath: 'These coordination skills are essential for technical lead and senior developer roles.',
                    timeManagement: 'The 60-minute window gives everyone time to review and respond thoughtfully, preventing rushed decisions.'
                },
                choices: {
                    'team-approves': {
                        text: '✅ Team Approves (No objections received)',
                        next: 'auto-resolve',
                        pathLabel: 'Team Approved'
                    },
                    'team-objects': {
                        text: '✋ Someone Objects',
                        next: 'create-discussion',
                        pathLabel: 'Team Objected'
                    },
                    'timeout': {
                        text: '⏰ Timeout (No response)',
                        next: 'auto-resolve',
                        pathLabel: 'Timeout Auto-Resolve'
                    }
                }
            },
            
            'auto-resolve': {
                title: 'Step 7: Auto-Resolution',
                description: '🔄 System is automatically resolving conflicts using push-order (first-to-push wins).',
                outcome: 'auto-resolved',
                info: 'All versions have been preserved with clear naming. Recovery tools are now available.',
                educational: {
                    type: 'system-learning',
                    title: '🔧 Professional System: Automated Conflict Resolution',
                    whatHappened: 'The system used "first-to-push wins" policy to resolve the conflict automatically.',
                    industryStandard: 'Many professional teams use similar automated resolution policies to prevent work from getting stuck in endless discussions.',
                    policyTypes: [
                        'First-to-push wins (time-based priority)',
                        'Senior developer priority (role-based)',
                        'Feature branch priority (workflow-based)',
                        'Vote-based resolution (democratic)'
                    ],
                    safetyNet: 'Critical point: ALL work is preserved. You can always recover any version or restart the discussion if needed.',
                    skillGained: 'You\'ve experienced how professional development teams handle coordination timeouts and automated policies.',
                    recoveryOptions: 'Professional systems always provide recovery mechanisms, just like this simulation.'
                }
            },
            
            'create-discussion': {
                title: 'Step 6: Simple Discussion Created',
                description: '💬 A simple discussion interface has been created for coordination.',
                info: 'MVP Discussion: Basic messages and decision buttons only.',
                educational: {
                    type: 'communication-skills',
                    title: '💼 Professional Practice: Technical Discussions',
                    excellentChoice: 'You initiated a technical discussion rather than making unilateral decisions.',
                    whatHappensNext: 'You\'ll practice the kind of technical communication that happens daily in professional game studios.',
                    discussionSkills: [
                        'Technical communication clarity',
                        'Respectful disagreement handling',
                        'Consensus building techniques',
                        'Documentation of decisions'
                    ],
                    skillBuilding: 'Learning to discuss technical trade-offs clearly and respectfully is crucial for senior developer roles.',
                    encouragement: 'Every professional developer needs strong discussion skills. You\'re building these abilities right now.',
                    realWorldImpact: 'Studios spend significant time in technical discussions. Your communication skills directly impact project success.'
                },
                choices: {
                    'use-alice': {
                        text: '👤 Use Alice\'s Version',
                        next: 'manual-resolve',
                        pathLabel: 'Chose Alice\'s Version'
                    },
                    'use-mine': {
                        text: '👤 Use My Version',
                        next: 'manual-resolve',
                        pathLabel: 'Chose My Version'
                    },
                    'combine': {
                        text: '🔧 Combine Manually',
                        next: 'manual-combine',
                        pathLabel: 'Manual Combination'
                    }
                }
            },
            
            'manual-resolve': {
                title: 'Step 7: Manual Resolution',
                description: '✅ Resolution completed based on team decision.',
                outcome: 'manual-resolved',
                info: 'All versions preserved as backups. Team has been notified of the resolution.',
                educational: {
                    type: 'success-celebration',
                    title: '🏆 Outstanding Teamwork! Professional Resolution Complete',
                    whatYouAccomplished: 'You successfully navigated a complex team coordination scenario using discussion and consensus.',
                    advancedSkills: [
                        'Technical communication under pressure',
                        'Conflict resolution through discussion',
                        'Consensus building with teammates',
                        'Professional decision-making processes'
                    ],
                    careerValue: 'These are the exact skills that distinguish senior developers and team leads in the gaming industry.',
                    leadershipQualities: 'You demonstrated leadership by facilitating team discussion rather than imposing individual decisions.',
                    reflection: 'Notice how everyone\'s work was preserved and the team made the final decision together. This is how successful game development teams operate.',
                    industryExamples: 'Studios like CD Projekt Red, Bungie, and Valve use similar collaborative decision-making processes for technical conflicts.'
                }
            },
            
            'manual-combine': {
                title: 'Step 7: Manual Combination',
                description: '🔧 Team will work together outside the system to combine changes.',
                outcome: 'manual-combination',
                info: 'All versions preserved. Team can use external tools to merge changes, then upload the result.',
                educational: {
                    type: 'advanced-learning',
                    title: '🎯 Advanced Collaboration: Complex Integration',
                    whatYouChose: 'The most sophisticated resolution approach - manual combination of multiple contributions.',
                    complexityLevel: 'This mirrors how professional teams handle complex features that require careful integration.',
                    advancedTechniques: [
                        'Multi-contributor integration',
                        'External tool coordination',
                        'Complex conflict resolution',
                        'Collaborative problem solving'
                    ],
                    whatYouLearned: 'You\'ve experienced the full spectrum of conflict resolution from simple to complex, just like professional developers encounter.',
                    nextLevel: 'You\'re ready for advanced collaboration scenarios. Consider exploring pair programming and code review practices next.',
                    masterLevel: 'This type of coordination is typically handled by senior developers and technical leads in professional environments.'
                }
            }
        };
        
        // Navigation Functions
        function showMainMenu() {
            document.getElementById('mainMenu').style.display = 'block';
            document.getElementById('githubSimulator').style.display = 'none';
            document.getElementById('godotSimulator').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';
            currentView = 'main';
        }
        
        function showGitHubSimulator() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('githubSimulator').style.display = 'block';
            document.getElementById('godotSimulator').style.display = 'none';
            document.getElementById('backBtn').style.display = 'block';
            currentView = 'github';
            resetGitHubSimulator();
        }
        
        function showGodotSimulator() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('githubSimulator').style.display = 'none';
            document.getElementById('godotSimulator').style.display = 'block';
            document.getElementById('backBtn').style.display = 'block';
            currentView = 'godot';
            resetGodotSimulation();
        }
        
        // GitHub Simulator Functions
        function resetGitHubSimulator() {
            githubState = {
                role: '',
                currentStep: 0,
                authMethod: '',
                workflow: []
            };
            document.getElementById('githubRoleSelection').style.display = 'grid';
            document.getElementById('githubWorkflow').style.display = 'none';
        }
        
        function startGitHubWorkflow(role) {
            githubState.role = role;
            githubState.currentStep = 0;
            githubState.workflow = role === 'student' ? githubWorkflows.student.base : githubWorkflows.teacher;
            
            document.getElementById('githubRoleSelection').style.display = 'none';
            document.getElementById('githubWorkflow').style.display = 'block';
            
            renderGitHubStep();
        }
        
        function buildStudentWorkflow() {
            let workflow = [...githubWorkflows.student.base];
            
            if (githubState.authMethod === 'personal-token') {
                workflow = [...workflow, ...githubWorkflows.student.personalToken, ...githubWorkflows.student.final];
            } else if (githubState.authMethod === 'github-cli') {
                workflow = [...workflow, ...githubWorkflows.student.githubCli, ...githubWorkflows.student.final];
            }
            
            return workflow;
        }
        
        function renderGitHubStep() {
            if (githubState.role === 'student' && githubState.authMethod) {
                githubState.workflow = buildStudentWorkflow();
            }
            
            const step = githubState.workflow[githubState.currentStep];
            if (!step) return;
            
            const progress = ((githubState.currentStep + 1) / githubState.workflow.length) * 100;
            document.getElementById('githubProgress').style.width = progress + '%';
            document.getElementById('githubStepInfo').textContent = 
                `Step ${githubState.currentStep + 1} of ${githubState.workflow.length}`;
            
            let stepHtml = `
                <div class="platform-badge ${step.platform}">${getPlatformIcon(step.platform)} ${getPlatformLabel(step.platform)}</div>
                <h3 class="step-title">${step.title}</h3>
                <div class="step-content">${step.content}</div>
            `;
            
            if (step.details) {
                stepHtml += `<div class="step-details">${step.details}</div>`;
            }
            
            if (step.warning) {
                stepHtml += `<div class="step-warning">⚠️ ${step.warning}</div>`;
            }
            
            if (step.type === 'choice') {
                stepHtml += '<div class="choices-grid">';
                step.choices.forEach(choice => {
                    stepHtml += `
                        <button class="choice-btn" onclick="makeGitHubChoice('${choice.id}')">
                            <div class="choice-header">
                                ${choice.id === 'personal-token' ? '🔑' : '💻'} ${choice.title}
                            </div>
                            <div class="choice-desc">${choice.description}</div>
                        </button>
                    `;
                });
                stepHtml += '</div>';
            } else if (!step.complete) {
                stepHtml += '<button class="next-btn" onclick="nextGitHubStep()">Next →</button>';
            } else {
                stepHtml += '<button class="complete-btn" onclick="resetGitHubSimulator()">Start New Simulation</button>';
            }
            
            document.getElementById('githubCurrentStep').innerHTML = stepHtml;
            
            // Update state display
            if (githubState.authMethod) {
                document.getElementById('githubStateDisplay').style.display = 'block';
                document.getElementById('githubStateContent').innerHTML = `
                    <div class="state-item">✓ Authentication Method: ${githubState.authMethod === 'personal-token' ? 'Personal Access Token' : 'GitHub CLI'}</div>
                    <div class="state-item">Total Steps in Current Path: ${githubState.workflow.length}</div>
                `;
            }
        }
        
        function makeGitHubChoice(choiceId) {
            if (choiceId === 'personal-token' || choiceId === 'github-cli') {
                githubState.authMethod = choiceId;
            }
            
            setTimeout(() => {
                githubState.currentStep++;
                renderGitHubStep();
            }, 500);
        }
        
        function nextGitHubStep() {
            githubState.currentStep++;
            renderGitHubStep();
        }
        
        function getPlatformIcon(platform) {
            const icons = {
                github: '🐙',
                godot: '🎮',
                endless: '📱',
                email: '📧'
            };
            return icons[platform] || '🔧';
        }
        
        function getPlatformLabel(platform) {
            const labels = {
                github: 'GitHub Web',
                godot: 'Godot',
                endless: 'Endless Platform',
                email: 'Email'
            };
            return labels[platform] || platform;
        }
        
        // Godot Simulator Functions
        function makeGodotChoice(choiceKey) {
            const step = godotWorkflowSteps[godotCurrentStep];
            const choice = step.choices[choiceKey];
            
            godotPathTaken.push(choice.pathLabel);
            updateGodotPathDisplay();
            
            if (choice.next) {
                godotCurrentStep = choice.next;
                renderGodotStep();
            }
        }

        function renderGodotStep() {
            const step = godotWorkflowSteps[godotCurrentStep];
            const container = document.getElementById('current-step-container');
            
            // Handle outcomes
            if (step.outcome) {
                showGodotOutcome(step);
                return;
            }
            
            // Add info box if exists
            let infoHtml = '';
            if (step.info) {
                infoHtml = `<div class="info-box"><strong>Info:</strong> ${step.info}</div>`;
            }
            
            // Add comprehensive educational content if exists
            let educationalHtml = '';
            if (step.educational) {
                const edu = step.educational;
                let eduClass = 'info-box';
                let eduIcon = '🎓';
                
                switch(edu.type) {
                    case 'learning-moment':
                        eduClass = 'success-box';
                        eduIcon = '🎓';
                        break;
                    case 'professional-practice':
                        eduClass = 'info-box';
                        eduIcon = '💼';
                        break;
                    case 'communication-skills':
                        eduClass = 'success-box';
                        eduIcon = '💬';
                        break;
                    case 'pattern-recognition':
                        eduClass = 'info-box';
                        eduIcon = '📊';
                        break;
                    case 'system-awareness':
                        eduClass = 'info-box';
                        eduIcon = '🔧';
                        break;
                    case 'success-celebration':
                        eduClass = 'success-box';
                        eduIcon = '🌟';
                        break;
                    case 'communication-feedback':
                        eduClass = 'success-box';
                        eduIcon = '💬';
                        break;
                    case 'system-learning':
                        eduClass = 'info-box';
                        eduIcon = '🔧';
                        break;
                    case 'advanced-learning':
                        eduClass = 'info-box';
                        eduIcon = '🎯';
                        break;
                }
                
                educationalHtml = `<div class="${eduClass}">
                    <h4>${eduIcon} ${edu.title}</h4>`;
                
                // What happened section
                if (edu.whatHappened) {
                    educationalHtml += `<p><strong>What happened:</strong> ${edu.whatHappened}</p>`;
                }
                
                // Why it matters section
                if (edu.whyItMatters) {
                    educationalHtml += `<p><strong>Why this matters:</strong> ${edu.whyItMatters}</p>`;
                }
                
                // What you learned section (array format)
                if (edu.whatYouLearned && Array.isArray(edu.whatYouLearned)) {
                    educationalHtml += `<p><strong>What you learned:</strong></p><ul>`;
                    edu.whatYouLearned.forEach(item => {
                        educationalHtml += `<li>${item}</li>`;
                    });
                    educationalHtml += `</ul>`;
                } else if (edu.whatYouLearned) {
                    educationalHtml += `<p><strong>What you learned:</strong> ${edu.whatYouLearned}</p>`;
                }
                
                // Skills demonstrated (array format)
                if (edu.skillsDemonstrated && Array.isArray(edu.skillsDemonstrated)) {
                    educationalHtml += `<p><strong>Skills demonstrated:</strong></p><ul>`;
                    edu.skillsDemonstrated.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                } else if (edu.skillsDemonstrated) {
                    educationalHtml += `<p><strong>Skills demonstrated:</strong> ${edu.skillsDemonstrated}</p>`;
                }
                
                // Advanced skills (array format)
                if (edu.advancedSkills && Array.isArray(edu.advancedSkills)) {
                    educationalHtml += `<p><strong>Advanced skills:</strong></p><ul>`;
                    edu.advancedSkills.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                } else if (edu.advancedSkills) {
                    educationalHtml += `<p><strong>Advanced skills:</strong> ${edu.advancedSkills}</p>`;
                }
                
                // Professional skills (array format)
                if (edu.professionalSkills && Array.isArray(edu.professionalSkills)) {
                    educationalHtml += `<p><strong>Professional skills:</strong></p><ul>`;
                    edu.professionalSkills.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // System features (array format)
                if (edu.systemFeatures && Array.isArray(edu.systemFeatures)) {
                    educationalHtml += `<p><strong>System features:</strong></p><ul>`;
                    edu.systemFeatures.forEach(feature => {
                        educationalHtml += `<li>${feature}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Communication tips (array format)
                if (edu.communicationTips && Array.isArray(edu.communicationTips)) {
                    educationalHtml += `<p><strong>Communication tips:</strong></p><ul>`;
                    edu.communicationTips.forEach(tip => {
                        educationalHtml += `<li>${tip}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Pattern recognition (array format)
                if (edu.patternRecognition && Array.isArray(edu.patternRecognition)) {
                    educationalHtml += `<p><strong>Pattern recognition:</strong></p><ul>`;
                    edu.patternRecognition.forEach(pattern => {
                        educationalHtml += `<li>${pattern}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Discussion skills (array format)
                if (edu.discussionSkills && Array.isArray(edu.discussionSkills)) {
                    educationalHtml += `<p><strong>Discussion skills:</strong></p><ul>`;
                    edu.discussionSkills.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Technical concepts (array format)
                if (edu.technicalConcepts && Array.isArray(edu.technicalConcepts)) {
                    educationalHtml += `<p><strong>Technical concepts:</strong></p><ul>`;
                    edu.technicalConcepts.forEach(concept => {
                        educationalHtml += `<li>${concept}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Advanced concepts (array format)
                if (edu.advancedConcepts && Array.isArray(edu.advancedConcepts)) {
                    educationalHtml += `<p><strong>Advanced concepts:</strong></p><ul>`;
                    edu.advancedConcepts.forEach(concept => {
                        educationalHtml += `<li>${concept}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Advanced techniques (array format)
                if (edu.advancedTechniques && Array.isArray(edu.advancedTechniques)) {
                    educationalHtml += `<p><strong>Advanced techniques:</strong></p><ul>`;
                    edu.advancedTechniques.forEach(technique => {
                        educationalHtml += `<li>${technique}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Policy types (array format)
                if (edu.policyTypes && Array.isArray(edu.policyTypes)) {
                    educationalHtml += `<p><strong>Resolution policies:</strong></p><ul>`;
                    edu.policyTypes.forEach(policy => {
                        educationalHtml += `<li>${policy}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Skills displayed (array format)
                if (edu.skillsDisplayed && Array.isArray(edu.skillsDisplayed)) {
                    educationalHtml += `<p><strong>Skills displayed:</strong></p><ul>`;
                    edu.skillsDisplayed.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Single field properties
                if (edu.industryContext) {
                    educationalHtml += `<p><strong>Industry context:</strong> ${edu.industryContext}</p>`;
                }
                
                if (edu.industryExample) {
                    educationalHtml += `<p><strong>Industry example:</strong> ${edu.industryExample}</p>`;
                }
                
                if (edu.industryExamples) {
                    educationalHtml += `<p><strong>Industry examples:</strong> ${edu.industryExamples}</p>`;
                }
                
                if (edu.realWorldApplication) {
                    educationalHtml += `<p><strong>Real-world application:</strong> ${edu.realWorldApplication}</p>`;
                }
                
                if (edu.realWorldExample) {
                    educationalHtml += `<p><strong>Real-world example:</strong> ${edu.realWorldExample}</p>`;
                }
                
                if (edu.feedback) {
                    educationalHtml += `<p><strong>Feedback:</strong> ${edu.feedback}</p>`;
                }
                
                if (edu.positiveReinforcement) {
                    educationalHtml += `<p><strong>You demonstrated:</strong> ${edu.positiveReinforcement}</p>`;
                }
                
                if (edu.nextLevel) {
                    educationalHtml += `<p><strong>Next level:</strong> ${edu.nextLevel}</p>`;
                }
                
                if (edu.professionalTip) {
                    educationalHtml += `<p><strong>Professional tip:</strong> ${edu.professionalTip}</p>`;
                }
                
                if (edu.bestPractice) {
                    educationalHtml += `<p><strong>Best practice:</strong> ${edu.bestPractice}</p>`;
                }
                
                if (edu.skillBuilding) {
                    educationalHtml += `<p><strong>Skill building:</strong> ${edu.skillBuilding}</p>`;
                }
                
                if (edu.whatHappensNext) {
                    educationalHtml += `<p><strong>What happens next:</strong> ${edu.whatHappensNext}</p>`;
                }
                
                if (edu.encouragement) {
                    educationalHtml += `<p><strong>Encouragement:</strong> ${edu.encouragement}</p>`;
                }
                
                if (edu.anticipation) {
                    educationalHtml += `<p><strong>Coming up:</strong> ${edu.anticipation}</p>`;
                }
                
                if (edu.industrySkill) {
                    educationalHtml += `<p><strong>Industry value:</strong> ${edu.industrySkill}</p>`;
                }
                
                if (edu.industryValue) {
                    educationalHtml += `<p><strong>Industry value:</strong> ${edu.industryValue}</p>`;
                }
                
                if (edu.industryStandard) {
                    educationalHtml += `<p><strong>Industry standard:</strong> ${edu.industryStandard}</p>`;
                }
                
                if (edu.industryRelevance) {
                    educationalHtml += `<p><strong>Industry relevance:</strong> ${edu.industryRelevance}</p>`;
                }
                
                if (edu.industryReality) {
                    educationalHtml += `<p><strong>Industry reality:</strong> ${edu.industryReality}</p>`;
                }
                
                if (edu.safetyNet) {
                    educationalHtml += `<p><strong>Safety guarantee:</strong> ${edu.safetyNet}</p>`;
                }
                
                if (edu.skillGained) {
                    educationalHtml += `<p><strong>New skill gained:</strong> ${edu.skillGained}</p>`;
                }
                
                if (edu.careerValue) {
                    educationalHtml += `<p><strong>Career value:</strong> ${edu.careerValue}</p>`;
                }
                
                if (edu.careerImpact) {
                    educationalHtml += `<p><strong>Career impact:</strong> ${edu.careerImpact}</p>`;
                }
                
                if (edu.leadershipPath) {
                    educationalHtml += `<p><strong>Leadership path:</strong> ${edu.leadershipPath}</p>`;
                }
                
                if (edu.leadershipQualities) {
                    educationalHtml += `<p><strong>Leadership qualities:</strong> ${edu.leadershipQualities}</p>`;
                }
                
                if (edu.timeManagement) {
                    educationalHtml += `<p><strong>Time management:</strong> ${edu.timeManagement}</p>`;
                }
                
                if (edu.reflection) {
                    educationalHtml += `<p><strong>Reflection:</strong> ${edu.reflection}</p>`;
                }
                
                if (edu.nextSteps) {
                    educationalHtml += `<p><strong>Next steps:</strong> ${edu.nextSteps}</p>`;
                }
                
                if (edu.whatYouAccomplished) {
                    educationalHtml += `<p><strong>What you accomplished:</strong> ${edu.whatYouAccomplished}</p>`;
                }
                
                if (edu.whatYouChose) {
                    educationalHtml += `<p><strong>What you chose:</strong> ${edu.whatYouChose}</p>`;
                }
                
                if (edu.excellentChoice) {
                    educationalHtml += `<p><strong>Excellent choice:</strong> ${edu.excellentChoice}</p>`;
                }
                
                if (edu.excellentDecision) {
                    educationalHtml += `<p><strong>Excellent decision:</strong> ${edu.excellentDecision}</p>`;
                }
                
                if (edu.complexityLevel) {
                    educationalHtml += `<p><strong>Complexity level:</strong> ${edu.complexityLevel}</p>`;
                }
                
                if (edu.masterLevel) {
                    educationalHtml += `<p><strong>Master level:</strong> ${edu.masterLevel}</p>`;
                }
                
                if (edu.realWorldImpact) {
                    educationalHtml += `<p><strong>Real-world impact:</strong> ${edu.realWorldImpact}</p>`;
                }
                
                if (edu.professionalContext) {
                    educationalHtml += `<p><strong>Professional context:</strong> ${edu.professionalContext}</p>`;
                }
                
                if (edu.recoveryOptions) {
                    educationalHtml += `<p><strong>Recovery options:</strong> ${edu.recoveryOptions}</p>`;
                }
                
                educationalHtml += '</div>';
            }
            
            // Add choices
            let choicesHtml = '';
            for (const [key, choice] of Object.entries(step.choices)) {
                choicesHtml += `<button class="choice-btn-godot" onclick="makeGodotChoice('${key}')">${choice.text}</button>`;
            }
            
            // Update the entire container content
            container.innerHTML = `
                <div class="current-step-godot">
                    <h3 id="step-title">${step.title}</h3>
                    <p id="step-description">${step.description}</p>
                    ${infoHtml}
                    ${educationalHtml}
                    <div class="choices-godot" id="choices-container">
                        ${choicesHtml}
                    </div>
                </div>
            `;
        }

        function showGodotOutcome(step) {
            const outcomeContainer = document.getElementById('outcome-container');
            const currentStepContainer = document.getElementById('current-step-container');
            const resetButton = document.getElementById('reset-button');
            
            let outcomeClass = 'success-box';
            let outcomeIcon = '🎉';
            let outcomeTitle = 'Workflow Complete!';
            
            switch(step.outcome) {
                case 'success':
                    outcomeTitle = 'Success! Changes Shared Successfully';
                    break;
                case 'auto-resolved':
                    outcomeTitle = 'Auto-Resolution Complete';
                    outcomeIcon = '🔄';
                    break;
                case 'manual-resolved':
                    outcomeTitle = 'Manual Resolution Complete';
                    outcomeIcon = '👥';
                    break;
                case 'manual-combination':
                    outcomeTitle = 'Manual Combination Required';
                    outcomeIcon = '🔧';
                    outcomeClass = 'info-box';
                    break;
                case 'simulation-pause':
                    outcomeTitle = 'Simulation Paused - Waiting Period';
                    outcomeIcon = '⸰';
                    outcomeClass = 'warning-box';
                    break;
            }
            
            // Add comprehensive educational content for outcomes
            let educationalHtml = '';
            if (step.educational) {
                const edu = step.educational;
                let eduIcon = '🎓';
                
                switch(edu.type) {
                    case 'success-celebration':
                        eduIcon = '🌟';
                        break;
                    case 'system-learning':
                        eduIcon = '🔧';
                        break;
                    case 'advanced-learning':
                        eduIcon = '🎯';
                        break;
                    case 'pattern-recognition':
                        eduIcon = '📊';
                        break;
                }
                
                educationalHtml = `<div class="success-box" style="margin-top: 10px;">
                    <h4>${eduIcon} ${edu.title}</h4>`;
                
                // What you accomplished
                if (edu.whatYouAccomplished) {
                    educationalHtml += `<p><strong>What you accomplished:</strong> ${edu.whatYouAccomplished}</p>`;
                }
                
                // Skills demonstrated (array format)
                if (edu.skillsDemonstrated && Array.isArray(edu.skillsDemonstrated)) {
                    educationalHtml += `<p><strong>Skills demonstrated:</strong></p><ul>`;
                    edu.skillsDemonstrated.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                } else if (edu.skillsDemonstrated) {
                    educationalHtml += `<p><strong>Skills demonstrated:</strong> ${edu.skillsDemonstrated}</p>`;
                }
                
                // Advanced skills (array format)
                if (edu.advancedSkills && Array.isArray(edu.advancedSkills)) {
                    educationalHtml += `<p><strong>Advanced skills:</strong></p><ul>`;
                    edu.advancedSkills.forEach(skill => {
                        educationalHtml += `<li>${skill}</li>`;
                    });
                    educationalHtml += `</ul>`;
                } else if (edu.advancedSkills) {
                    educationalHtml += `<p><strong>Advanced skills:</strong> ${edu.advancedSkills}</p>`;
                }
                
                // Advanced techniques (array format)
                if (edu.advancedTechniques && Array.isArray(edu.advancedTechniques)) {
                    educationalHtml += `<p><strong>Advanced techniques:</strong></p><ul>`;
                    edu.advancedTechniques.forEach(technique => {
                        educationalHtml += `<li>${technique}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Policy types (array format)
                if (edu.policyTypes && Array.isArray(edu.policyTypes)) {
                    educationalHtml += `<p><strong>Resolution policies:</strong></p><ul>`;
                    edu.policyTypes.forEach(policy => {
                        educationalHtml += `<li>${policy}</li>`;
                    });
                    educationalHtml += `</ul>`;
                }
                
                // Single properties
                if (edu.careerValue) {
                    educationalHtml += `<p><strong>Career value:</strong> ${edu.careerValue}</p>`;
                }
                
                if (edu.careerImpact) {
                    educationalHtml += `<p><strong>Career impact:</strong> ${edu.careerImpact}</p>`;
                }
                
                if (edu.industryValue) {
                    educationalHtml += `<p><strong>Industry value:</strong> ${edu.industryValue}</p>`;
                }
                
                if (edu.leadershipQualities) {
                    educationalHtml += `<p><strong>Leadership qualities:</strong> ${edu.leadershipQualities}</p>`;
                }
                
                if (edu.nextSteps) {
                    educationalHtml += `<p><strong>Next steps:</strong> ${edu.nextSteps}</p>`;
                }
                
                if (edu.reflection) {
                    educationalHtml += `<p><strong>Reflection:</strong> ${edu.reflection}</p>`;
                }
                
                if (edu.industryExamples) {
                    educationalHtml += `<p><strong>Industry examples:</strong> ${edu.industryExamples}</p>`;
                }
                
                if (edu.industryStandard) {
                    educationalHtml += `<p><strong>Industry standard:</strong> ${edu.industryStandard}</p>`;
                }
                
                if (edu.safetyNet) {
                    educationalHtml += `<p><strong>Safety guarantee:</strong> ${edu.safetyNet}</p>`;
                }
                
                if (edu.skillGained) {
                    educationalHtml += `<p><strong>New skill gained:</strong> ${edu.skillGained}</p>`;
                }
                
                if (edu.realWorldSkill) {
                    educationalHtml += `<p><strong>Real-world application:</strong> ${edu.realWorldSkill}</p>`;
                }
                
                if (edu.whatYouLearned) {
                    educationalHtml += `<p><strong>What you learned:</strong> ${edu.whatYouLearned}</p>`;
                }
                
                if (edu.nextLevel) {
                    educationalHtml += `<p><strong>Ready for next level:</strong> ${edu.nextLevel}</p>`;
                }
                
                if (edu.professionalTip) {
                    educationalHtml += `<p><strong>Professional tip:</strong> ${edu.professionalTip}</p>`;
                }
                
                if (edu.complexityLevel) {
                    educationalHtml += `<p><strong>Complexity level:</strong> ${edu.complexityLevel}</p>`;
                }
                
                if (edu.masterLevel) {
                    educationalHtml += `<p><strong>Master level:</strong> ${edu.masterLevel}</p>`;
                }
                
                if (edu.whatHappened) {
                    educationalHtml += `<p><strong>What happened:</strong> ${edu.whatHappened}</p>`;
                }
                
                if (edu.recoveryOptions) {
                    educationalHtml += `<p><strong>Recovery options:</strong> ${edu.recoveryOptions}</p>`;
                }
                
                educationalHtml += '</div>';
            }
            
            outcomeContainer.innerHTML = `
                <div class="outcome">
                    <h3>${outcomeIcon} ${outcomeTitle}</h3>
                    <p>${step.description}</p>
                    ${step.info ? `<div class="${outcomeClass}"><strong>Result:</strong> ${step.info}</div>` : ''}
                </div>
                ${educationalHtml}
            `;
            
            currentStepContainer.style.display = 'none';
            resetButton.style.display = 'block';
        }

        function updateGodotPathDisplay() {
            const pathDisplay = document.getElementById('path-display');
            pathDisplay.innerHTML = godotPathTaken.map(step => 
                `<span class="path-step">${step}</span>`
            ).join(' → ');
        }

        function resetGodotSimulation() {
            godotCurrentStep = 'file-access';
            godotPathTaken = ['Started'];
            
            document.getElementById('outcome-container').innerHTML = '';
            document.getElementById('current-step-container').style.display = 'block';
            document.getElementById('reset-button').style.display = 'none';
            
            updateGodotPathDisplay();
            renderGodotStep();
        }
        
        // Initialize
        showMainMenu();
    </script>
</body>
</html>